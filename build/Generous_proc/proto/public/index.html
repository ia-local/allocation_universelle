<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVNU Prototype | CV Numérique Universel & Monétisation IA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav id="mainNavbar" class="smart-navbar-top-fixed">
        <div class="navbar-brand">
            <h1 class="app-title-navbar"><i class="fas fa-id-card-alt"></i> CVNU Prototype</h1>
        </div>

        <div class="navbar-main-links">
            <a href="#home" class="nav-link active" data-section="home"><i class="fas fa-home"></i> Accueil</a>
            <a href="#dashboard" class="nav-link" data-section="dashboard"><i class="fas fa-chart-line"></i> Tableau de Bord</a>
            <a href="#cv-management" class="nav-link" data-section="cv-management"><i class="fas fa-address-card"></i> Gestion CV</a>
            <a href="#chat" class="nav-link" data-section="chat"><i class="fas fa-comments"></i> Chat IA</a>
            <a href="#about" class="nav-link" data-section="about"><i class="fas fa-info-circle"></i> À Propos</a>
        </div>
    </nav>

    <div class="app-container">
        <aside id="dynamicLeftNav" class="dynamic-left-nav">
            <div class="dynamic-nav-title"></div>
            <ul class="dynamic-nav-list">
                </ul>
        </aside>

        <main class="content-area">
            <section id="home" class="content-section active">
                <div class="card ia-interaction-panel">
                    <h2 class="card-title"><i class="fas fa-robot"></i> Assistant IA</h2>
                    <textarea id="promptInput" placeholder="Écrivez votre prompt ici..."></textarea>
                    <div class="button-group">
                        <button id="generateResponseBtn" class="btn btn-primary"><i class="fas fa-magic"></i> Générer Réponse</button>
                        <button id="clearPromptBtn" class="btn btn-secondary"><i class="fas fa-eraser"></i> Effacer</button>
                    </div>
                    <div class="ia-response-output custom-scrollbar">
                        <pre id="iaResponseOutput">La réponse de l'IA apparaîtra ici...</pre>
                    </div>
                </div>
            </section>

            <section id="dashboard" class="content-section">
                <div class="dashboard-header">
                    <h2 class="card-title"><i class="fas fa-chart-line"></i> Tableau de Bord UTMi & CVNU</h2>
                    <button id="refreshDashboardBtn" class="btn btn-icon btn-secondary" title="Actualiser le Tableau de Bord">
                        <i class="fas fa-sync-alt"></i> Actualiser
                    </button>
                </div>

                <div class="dashboard-grid">
                    <div class="card metric-card">
                        <h3>Capital de Départ du CV (EUR)</h3>
                        <p class="metric-value" id="initialCapital">0.00</p>
                    </div>
                    <div class="card metric-card">
                        <h3>Revenu Universel Mensuel Estimé (EUR)</h3>
                        <p class="metric-value" id="monthlyUniversalIncome">0.00</p>
                    </div>
                    <div class="card metric-card">
                        <h3>Solde de Trésorerie (EUR)</h3>
                        <p class="metric-value" id="treasuryBalance">0.00</p>
                    </div>
                    <div class="card metric-card">
                        <h3>Total UTMi Générés</h3>
                        <p class="metric-value" id="totalUtmi">0.00</p>
                    </div>
                    <div class="card metric-card">
                        <h3>Coût Estimé Total (USD)</h3>
                        <p class="metric-value" id="totalEstimatedCostUSD">0.000000</p>
                    </div>
                     <div class="card metric-card">
                        <h3>Coût Estimé Total (EUR)</h3>
                        <p class="metric-value" id="totalEstimatedCostEUR">0.000000</p>
                    </div>
                    <div class="card metric-card">
                        <h3>Nb. Total Interactions</h3>
                        <p class="metric-value" id="totalInteractionCount">0</p>
                    </div>
                </div>

                <div class="card chart-container">
                    <canvas id="mainFinancialChart"></canvas>
                </div>

                <div class="dashboard-details-grid">
                    <div class="card">
                        <h3>UTMi par Type d'Interaction</h3>
                        <ul id="utmiByType" class="list-unstyled"><li>Aucune donnée.</li></ul>
                    </div>
                    <div class="card">
                        <h3>UTMi par Modèle d'IA</h3>
                        <ul id="utmiByModel" class="list-unstyled"><li>Aucune donnée.</li></ul>
                    </div>
                    <div class="card">
                        <h3>UTMi/Coût par Modèle</h3>
                        <ul id="utmiPerCostRatioByModel" class="list-unstyled"><li>Aucune donnée.</li></ul>
                    </div>
                    <div class="card">
                        <h3>UTMi par Axe Cognitif</h3>
                        <ul id="utmiByCognitiveAxis" class="list-unstyled"><li>Aucune donnée.</li></ul>
                    </div>
                    <div class="card">
                        <h3>UTMi Thématiques</h3>
                        <ul class="list-unstyled">
                            <li id="thematicUtmiMarketing">Marketing: 0.00 UTMi</li>
                            <li id="thematicUtmiAffiliation">Affiliation: 0.00 UTMi</li>
                            <li id="thematicUtmiFiscalEconomic">Fiscal/Économique: 0.00 UTMi</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>Top Sujets Valorisé</h3>
                        <ul id="mostValuableTopics" class="list-unstyled"><li>Aucune donnée.</li></ul>
                    </div>
                     <div class="card">
                        <h3>Activités les Plus Courantes</h3>
                        <ul id="mostCommonActivities" class="list-unstyled"><li>Aucune donnée.</li></ul>
                    </div>
                    <div class="card">
                        <h3>Taux de Change (1 EUR)</h3>
                        <ul id="exchangeRates" class="list-unstyled"><li>Aucune donnée.</li></ul>
                    </div>
                </div>
            </section>

            <section id="cv-management" class="content-section">
                <h2 class="card-title"><i class="fas fa-address-card"></i> Gestion du CV Numérique</h2>

                <div class="cv-generation-panel card">
                    <h3>Générer ou Importer un CV Structuré</h3>
                    <textarea id="cvInput" rows="10" placeholder="Collez le texte de votre CV ici (expériences, compétences, formations...)"></textarea>
                    <div class="button-group">
                        <button id="generateCvBtn" class="btn btn-primary"><i class="fas fa-cogs"></i> Générer CV Structuré</button>
                        <button id="importCvFileBtn" class="btn btn-secondary"><i class="fas fa-upload"></i> Importer Fichier CV</button>
                        <input type="file" id="actualCvFileInput" style="display: none;">
                        <button id="downloadCvBtn" class="btn btn-tertiary" style="display:none;"><i class="fas fa-download"></i> Télécharger JSON</button>
                    </div>
                    <p class="hint-text">Utilisera l'IA pour extraire et organiser les informations clés de votre CV.</p>
                </div>

                <div class="cvnu-insights-panel card">
                    <h3>Insights CVNU</h3>
                    <div class="metric-grid-small">
                        <div class="metric-card-small">
                            <h4>Valeur Initiale CVNU</h4>
                            <p class="metric-value-small" id="cvnuInitialValue">0.00</p>
                            <p class="metric-unit">points</p>
                        </div>
                        <div class="metric-card-small">
                            <h4>Niveau CVNU</h4>
                            <p class="metric-value-small" id="cvnuLevel">N/A</p>
                        </div>
                        <div class="metric-card-small">
                            <h4>Revenu Mensuel Estimé</h4>
                            <p class="metric-value-small" id="cvnuEstimatedMonthlyIncome">0.00</p>
                            <p class="metric-unit">EUR</p>
                        </div>
                    </div>
                    <button id="calculateCvnuValueBtn" class="btn btn-primary mt-2" disabled><i class="fas fa-calculator"></i> Calculer Valeur CVNU</button>
                    <p class="hint-text mt-1">Évalue votre profil pour générer votre capital numérique et votre revenu passif estimé.</p>
                </div>

                <div class="cv-output-area card">
                    <h3>Prévisualisation du CV Structuré (JSON)</h3>
                    <pre id="cvOutput" class="custom-scrollbar"><p class="placeholder-text">Votre CV sera généré ici. Il affichera vos compétences et expériences structurées.</p></pre>
                    </div>
            </section>

            <section id="chat" class="content-section">
                <h2 class="card-title"><i class="fas fa-comments"></i> Chatroom IA</h2>
                <div class="chat-window custom-scrollbar" id="chatMessages">
                    <p class="placeholder-text">Commencez une nouvelle conversation ou sélectionnez-en une existante à gauche.</p>
                </div>
                <div class="chat-input-area">
                    <textarea id="chatInput" placeholder="Écrivez votre message..." rows="1"></textarea>
                    <button id="chatSendButton" class="btn btn-primary" disabled><i class="fas fa-paper-plane"></i> Envoyer</button>
                </div>
            </section>

            <section id="about" class="content-section">
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-info-circle"></i> À Propos de CVNU</h2>
                    <p>
                        Bienvenue sur CVNU, votre plateforme prototype pour le CV Numérique Universel.
                        Ce projet explore la valorisation de vos compétences et de vos interactions avec l'intelligence artificielle,
                        transformant votre activité numérique en un potentiel de capital et de revenu passif.
                    </p>
                    <p>
                        Dans cette version simplifiée, les données sont stockées en mémoire et ne sont pas persistantes.
                        Les calculs de valorisation sont basés sur des coefficients simplifiés.
                    </p>
                    <p>
                        Ce prototype a été développé dans le cadre d'une démonstration fonctionnelle et n'est pas destiné à une utilisation en production.
                    </p>
                </div>
            </section>
        </main>
    </div>

    <footer class="app-footer">
        <p>&copy; 2025 CVNU - Prototype Simplifié. Tous droits réservés.</p>
        <div class="social-links">
            <a href="#" class="social-icon" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
            <a href="#" class="social-icon" title="Twitter"><i class="fab fa-twitter-square"></i></a>
            <a href="#" class="social-icon" title="GitHub"><i class="fab fa-github-square"></i></a>
        </div>
    </footer>

    <div id="genericAppModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="genericModalTitle">Titre du Modal</h3>
                <button class="close-modal-btn" id="genericCloseModalBtn"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body" id="genericModalBody">
                <p>Contenu du modal.</p>
            </div>
            <div class="modal-footer" id="genericModalFooter">
                <button id="genericModalConfirmBtn" class="btn btn-primary" style="display:none;">Confirmer</button>
                <button id="genericModalCancelBtn" class="btn btn-secondary" style="display:none;">Annuler</button>
                <button id="genericModalOkBtn" class="btn btn-primary" style="display:none;">OK</button>
            </div>
        </div>
    </div>

    <div id="globalStatusMessage" class="status-message" role="status" aria-live="polite"></div>

    <script type="module" src="modal.js"></script>
    <script type="module" src="pagination.js"></script>
    <script type="module" src="cv.js"></script> </body>
</html>