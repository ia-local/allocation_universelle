<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVNU | CV Numérique Universel & Monétisation de Compétences IA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="global-status-message" class="status-message"></div>
    <nav id="mainNavbar" class="smart-navbar-top-fixed">
        <div class="navbar-brand">
            <h1 class="app-title-navbar"><i class="fas fa-id-card-alt"></i> CVNU</h1>
        </div>

        <div class="navbar-main-links">
            <a href="#home" class="nav-link active" data-section="home"><i class="fas fa-home"></i> Accueil</a>
            <a href="#dashboard" class="nav-link" data-section="dashboard"><i class="fas fa-chart-line"></i> Tableau de Bord</a>
            <a href="#chat" class="nav-link" data-section="chat"><i class="fas fa-comments"></i> Chatbot</a>
            <a href="#cv-generation" class="nav-link" data-section="cv-generation"><i class="fas fa-file-alt"></i> Génération CV</a>
            <a href="#wallet" class="nav-link" data-section="wallet"><i class="fas fa-wallet"></i> Portefeuille</a>
        </div>
    </nav>

    <div class="app-container">
        <div id="home" class="content-section active">
            <h2>Accueil</h2>
            <div class="card">
                <h3>Interagir avec l'IA</h3>
                <textarea id="promptInput" placeholder="Posez votre question ou demandez une génération..."></textarea>
                <div class="button-group">
                    <button id="generateResponseBtn" class="btn btn-primary">Générer Réponse</button>
                    <button id="clearPromptBtn" class="btn btn-secondary">Effacer</button>
                </div>
                <div id="iaResponseOutput" class="output-area"></div>
            </div>
            <div class="card">
                <h3>Génération de CV</h3>
                <p>Uploadez votre CV en texte brut ou laissez l'IA vous aider à en créer un.</p>
                <input type="file" id="cvFileInput" accept=".txt,.pdf,.doc,.docx" style="display: none;">
                <div class="button-group">
                    <button id="uploadCvBtn" class="btn btn-secondary">Uploader CV</button>
                    <span id="fileNameDisplay" class="file-name-display">Aucun fichier</span>
                    <button id="parseCvBtn" class="btn btn-primary">Analyser & Structurer CV</button>
                    <button id="renderCvHtmlBtn" class="btn btn-secondary">Générer HTML CV</button>
                </div>
                <div id="cvHtmlOutput" class="output-area"></div>
            </div>
        </div>

        <div id="dashboard" class="content-section">
            <h2>Tableau de Bord UTMi & Insights</h2>
            <div class="button-group" style="margin-bottom: 20px;">
                <button id="refreshDashboardBtn" class="btn btn-primary"><i class="fas fa-sync-alt"></i> Actualiser les Insights</button>
            </div>
            <div class="dashboard-grid">
                <div class="metric-card">
                    <span class="metric-title">Total UTMi Générés</span>
                    <span class="metric-value" id="totalUtmiEl">0.00</span>
                </div>
                <div class="metric-card">
                    <span class="metric-title">Interactions Totales</span>
                    <span class="metric-value" id="totalInteractionCountEl">0</span>
                </div>
                <div class="metric-card">
                    <span class="metric-title">UTMi Moyens / Interaction</span>
                    <span class="metric-value" id="averageUtmiPerInteractionEl">0.00</span>
                </div>
                <div class="metric-card">
                    <span class="metric-title">Ratio UTMi / Coût Total</span>
                    <span class="metric-value" id="totalUtmiPerCostRatioEl">0.00</span>
                </div>
            </div>

            <div class="dashboard-details-grid">
                <div class="card">
                    <h3 class="card-title">UTMi par Type d'Interaction</h3>
                    <canvas id="utmiByTypeChart"></canvas>
                </div>
                <div class="card">
                    <h3 class="card-title">UTMi par Modèle d'IA</h3>
                    <canvas id="utmiByModelChart"></canvas>
                </div>
                <div class="card">
                    <h3 class="card-title">Ratio UTMi/Coût par Modèle</h3>
                    <canvas id="utmiPerCostRatioByModelChart"></canvas>
                </div>
                <div class="card">
                    <h3 class="card-title">UTMi par Axe Cognitif</h3>
                    <canvas id="utmiByCognitiveAxisChart"></canvas>
                </div>
                <div class="card">
                    <h3 class="card-title">UTMi par Focus Thématique</h3>
                    <div class="metric-grid-small">
                        <div class="metric-card-small">
                            <span>Marketing</span>
                            <span id="thematicUtmiMarketingEl">0.00</span>
                        </div>
                        <div class="metric-card-small">
                            <span>Affiliation</span>
                            <span id="thematicUtmiAffiliationEl">0.00</span>
                        </div>
                        <div class="metric-card-small">
                            <span>Fiscal/Économique</span>
                            <span id="thematicUtmiFiscalEconomicEl">0.00</span>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title">Sujets les Plus Valorisé</h3>
                    <ul id="mostValuableTopicsEl"></ul>
                </div>
                <div class="card">
                    <h3 class="card-title">Activités les Plus Communes</h3>
                    <ul id="mostCommonActivitiesEl"></ul>
                </div>
                <div class="card">
                    <h3 class="card-title">Taux de Change Actuels</h3>
                    <ul id="exchangeRatesEl"></ul>
                </div>
            </div>
        </div>

        <div id="chat" class="content-section">
            <h2>Chatbot Conversationnel</h2>
            <div class="chat-container">
                <aside id="dynamicLeftNav" class="dynamic-left-nav">
                    <ul id="dynamicNavList" class="dynamic-nav-list">
                        </ul>
                    <div class="pagination-controls">
                        <button id="prevPageBtn">Précédent</button>
                        <span id="currentPageInfo"></span>
                        <button id="nextPageBtn">Suivant</button>
                    </div>
                    <div class="chat-actions">
                        <button id="newChatBtn" class="btn btn-primary btn-block"><i class="fas fa-plus"></i> Nouvelle Conversation</button>
                        <button id="refreshConversationsBtn" class="btn btn-secondary btn-block"><i class="fas fa-sync"></i> Actualiser</button>
                    </div>
                </aside>
                <main class="chat-main">
                    <div id="chatMessages" class="chat-messages">
                        </div>
                    <div class="chat-input-area">
                        <textarea id="chatMessageInput" placeholder="Écrivez votre message..."></textarea>
                        <button id="sendMessageBtn" class="btn btn-primary"><i class="fas fa-paper-plane"></i> Envoyer</button>
                    </div>
                </main>
            </div>
        </div>

        <div id="cv-generation" class="content-section">
            <h2>Générateur de CV & Valorisation CVNU</h2>
            <div class="card">
                <h3>Téléchargement et Analyse de CV</h3>
                <p>Téléchargez votre CV pour l'analyser et le structurer.</p>
                <input type="file" id="cvGenFileInput" accept=".txt,.pdf,.doc,.docx" style="display: none;">
                <div class="button-group">
                    <button id="uploadGenCvBtn" class="btn btn-secondary">Uploader CV</button>
                    <span id="cvGenFileNameDisplay" class="file-name-display">Aucun fichier</span>
                    <button id="parseGenCvBtn" class="btn btn-primary">Analyser & Structurer</button>
                </div>
                <div id="cvGenStructuredOutput" class="output-area">
                    </div>
            </div>

            <div class="card">
                <h3>Génération HTML du CV</h3>
                <p>Générez un aperçu HTML basé sur le CV structuré.</p>
                <div class="button-group">
                    <button id="renderGenCvHtmlBtn" class="btn btn-primary">Générer HTML</button>
                    <button id="downloadCvHtmlBtn" class="btn btn-secondary">Télécharger HTML</button>
                </div>
                <div id="cvGenHtmlPreview" class="output-area html-preview">
                    </div>
            </div>

            <div class="card">
                <h3>Calcul de la Valeur CVNU et Revenu Universel</h3>
                <p>Calculez la valeur monétaire de votre CV et votre Revenu Universel Mensuel.</p>
                <div class="button-group">
                    <button id="calculateCvValueBtn" class="btn btn-primary">Calculer Valeur CVNU</button>
                    <button id="calculateUniversalIncomeBtn" class="btn btn-secondary">Calculer Revenu Universel</button>
                </div>
                <div id="cvValueOutput" class="output-area">
                    <p><strong>Valeur de votre CVNU :</strong> <span id="displayCvValue">N/A</span> EUR</p>
                    <p><strong>Votre Revenu Universel Mensuel (RUM) :</strong> <span id="displayUniversalIncome">N/A</span> EUR</p>
                    <p><strong>Niveau de votre CVNU :</strong> <span id="displayCvLevel">N/A</span></p>
                </div>
            </div>
        </div>

        <div id="wallet" class="content-section">
            <h2>Mon Portefeuille & Trésorerie CVNU</h2>
            <div class="card">
                <h3>Statut Actuel</h3>
                <div class="metric-grid-small">
                    <div class="metric-card-small">
                        <span>Capital de Départ CVNU</span>
                        <span id="displayInitialCvCapital">0.00 EUR</span>
                    </div>
                    <div class="metric-card-small">
                        <span>Solde Actuel (Trésorerie)</span>
                        <span id="displayTreasuryBalance">0.00 EUR</span>
                    </div>
                    <div class="metric-card-small">
                        <span>UTM Totaux Acquis</span>
                        <span id="displayTotalUTM">0.00</span>
                    </div>
                    <div class="metric-card-small">
                        <span>Points d'Interaction (PI)</span>
                        <span id="displayTotalPI">0</span>
                    </div>
                </div>
                <div class="button-group" style="margin-top: 20px;">
                    <button id="refreshWalletBtn" class="btn btn-primary">Actualiser Portefeuille</button>
                    <button id="performTransactionBtn" class="btn btn-secondary">Effectuer Transaction (Simulé)</button>
                </div>
            </div>

            <div class="card">
                <h3>Historique des Transactions (Simulé)</h3>
                <ul id="transactionHistoryList" class="transaction-list">
                    </ul>
            </div>
        </div>
    </div>

    <footer class="app-footer">
        <div class="footer-links">
            <a href="#">À propos</a>
            <a href="#">Contact</a>
            <a href="#">Confidentialité</a>
            <a href="#">Conditions</a>
        </div>
        <div class="social-media">
            <a href="#" class="social-icon" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
            <a href="#" class="social-icon" title="Twitter"><i class="fab fa-twitter-square"></i></a>
            <a href="#" class="social-icon" title="GitHub"><i class="fab fa-github-square"></i></a>
            <a href="#" class="social-icon" title="YouTube"><i class="fab fa-youtube"></i></a>
        </div>
    </footer>

    <div id="genericAppModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="genericModalTitle">Titre du Modal</h3>
                <button class="close-modal-btn" id="genericCloseModalBtn"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body" id="genericModalBody">
                <p>Contenu du modal.</p>
            </div>
            <div class="modal-footer" id="genericModalFooter">
                <button id="genericModalConfirmBtn" class="btn btn-primary" style="display:none;">Confirmer</button>
                <button id="genericModalCancelBtn" class="btn btn-secondary" style="display:none;">Annuler</button>
                <button id="genericModalOkBtn" class="btn btn-primary" style="display:none;">OK</button>
            </div>
        </div>
    </div>

    <script src="modal.js"></script>
    <script src="pagination.js"></script>
    <script src="cv.js"></script>
</body>
</html>